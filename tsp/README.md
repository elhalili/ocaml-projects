# Traveling Salesperson Problem (TSP) – Functional Approach with Genetic Algorithm

This project implements the Traveling Salesperson Problem (TSP) using OCaml. Two approaches are provided:

- Naive brute-force search by evaluating all route permutations
- Genetic algorithm for efficient approximation on larger inputs

## Problem Overview

The TSP consists of finding the shortest possible route that visits each city exactly once and returns to the starting point, given a list of cities and their pairwise distances.

Due to its NP-hard nature, an exact solution becomes impractical as the number of cities grows. A genetic algorithm is used here to approximate optimal routes efficiently.

## Genetic Algorithm Overview

The genetic algorithm used in this project follows a standard evolutionary structure:

1. **Encoding**  
   A candidate route is a permutation of cities, represented as a list.

2. **Initial Population**  
   A set of random routes generated by shuffling the input list.

3. **Fitness Function**  
   Inverse of the total route distance: `fitness = 1.0 / route_length`

4. **Selection**  
   Selects the top-N routes with the highest fitness as parents.

5. **Crossover**  
   Uses cycle crossover to create new offspring that preserve the relative order of cities.

6. **Mutation**  
   With a fixed probability, swaps two cities in the route to maintain genetic diversity.

7. **Elitism and Replacement**  
   A subset of the best individuals from the current population is preserved into the next generation.

8. **Termination**  
   The process repeats for a fixed number of generations. The best route is selected from the final population.

## City Representation

Cities are modeled as 2D points:

```ocaml
type city = City of float * float
type map = city list
type route = Route of city list
````

The Euclidean distance is used to compute the cost between two cities:

```ocaml
let euclidean_distance (City (x1, y1)) (City (x2, y2)) =
  sqrt ((x1 -. x2) ** 2. +. (y1 -. y2) ** 2.)
```

## Example

Cities:

```ocaml
let magic_land = [
  City (1., 2.);
  City (2., 2.3);
  City (3., 1.);
  City (4., 2.3);
  City (1., 1.2)
]
```

Sample output from the genetic algorithm:

```
short reached distance: 7.494128
City x: 4.000000, y: 2.300000
City x: 2.000000, y: 2.300000
City x: 1.000000, y: 2.000000
...
```

## How to Run

### Requirements

* OCaml interpreter (`ocaml`)

### Genetic Algorithm Version

To run the genetic TSP solution:

```bash
ocaml genetics.ml
```

### Naive Version

To run the brute-force TSP solver:

```bash
ocaml naive.ml
```

## Files

* `structs.ml` – Type definitions for cities and routes
* `common.ml` – Utility functions for distance and route evaluation
* `naive.ml` – Brute-force TSP solution
* `genetics.ml` – Full implementation of the genetic algorithm

